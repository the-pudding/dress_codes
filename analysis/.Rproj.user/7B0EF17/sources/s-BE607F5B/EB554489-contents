---
title: "baseline"
author: "Amber Thomas"
date: "11/29/2018"
output: 
  html_document:
    toc: TRUE
    toc_float: true
    theme: cosmo
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Justification

This document exists to determine the diversity of the freelance authors and creators that we reach out to, that reach out to us, and that ultimately end up writing an article with us. 

```{r message = FALSE}
library(tidyverse)
library(here)
```

## Downloading Spreadsheet

We've created a spreadsheet of all potential freelancers from 2017 to 2018. We'll download that using the `googledrive` package. 

```{r eval = FALSE}
googledrive::drive_download("Freelance First Contact Tracking", path = here::here("baseline.csv"), type = "csv", overwrite = TRUE)
```

```{r}

names <- c("name", "gender", "race", "year", "connection", "outbound", "inbound", "movedForward", "published", "notes")

baseline <- read.csv(here::here("baseline.csv"), stringsAsFactors = FALSE, na.strings = c("", "?"), header = TRUE, col.names = names)


```

## Inbound Pitches

### Gender

Let's take a look at the gender breakdown by year
```{r}
inboundGender <- baseline %>% 
  filter(inbound == 1,
         !is.na(gender)) %>% 
  mutate(gender = trimws(gender)) %>% 
  group_by(year, gender) %>% 
  distinct(name) %>% 
  summarise(count = n())

ggplot(inboundGender, aes(x = gender, y = count, fill = gender )) + geom_bar(stat = "identity") + facet_wrap(~year)
```
Woah, ok, so the number of female inquiries went up slightly (by 3), but our male inbound messages more than doubled. 

### Race
```{r}
inboundRace<- baseline %>% 
  filter(inbound == 1) %>% 
  mutate(race = trimws(race),
         race = gsub("?", "", race, fixed = TRUE), 
         race = tolower(race)) %>% 
  group_by(year, race) %>% 
  distinct(name) %>% 
  summarise(count = n())

ggplot(inboundRace, aes(x = race, y = count, fill = race )) + geom_bar(stat = "identity") + facet_wrap(~year)
```

Alright, so we've had a large increase in Asian and white freelance pitches, though, there are obviously some groups of people who (to our best guess) have not pitched a story in the past 2 years. 

### Intersections

Let's check out the intersections of race and gender. 

```{r}
inboundIntersect<- baseline %>% 
  filter(inbound == 1, 
         !is.na(gender)) %>% 
  mutate(race = trimws(race),
         race = gsub("?", "", race, fixed = TRUE),
         race = tolower(race),
         gender = trimws(gender)) %>% 
  group_by(year, gender, race) %>% 
  distinct(name) %>% 
  summarise(count = n())

ggplot(inboundIntersect, aes(x = race, y = count, fill = race)) + geom_bar(stat = "identity") + facet_grid(year ~ gender)
```
We see similar trends for the intersections of both race and gender, except when it comes to hispanic women.


## Outbound Pitches

Let's now take a look at who we've reached out to over the past 2 years. 

### Gender

Let's take a look at the gender breakdown by year
```{r}
outboundGender <- baseline %>% 
  filter(outbound == 1,
         !is.na(gender)) %>% 
  mutate(gender = trimws(gender)) %>% 
  group_by(year, gender) %>% 
  distinct(name) %>% 
  summarise(count = n())

ggplot(outboundGender, aes(x = gender, y = count, fill = gender )) + geom_bar(stat = "identity") + facet_wrap(~year)
```
Woah, ok, so the number of female inquiries went up slightly (by 1), but our male outbound messages tripled. 

### Race
```{r}
outboundRace<- baseline %>% 
  filter(outbound == 1) %>% 
  mutate(race = trimws(race),
         race = gsub("?", "", race, fixed = TRUE), 
         race = tolower(race)) %>% 
  group_by(year, race) %>% 
  distinct(name) %>% 
  summarise(count = n())

ggplot(outboundRace, aes(x = race, y = count, fill = race )) + geom_bar(stat = "identity") + facet_wrap(~year)
```

So we've increased the number of both black and white contributors that we've reached out to in 2018.

### Intersections

Let's check out the intersections of race and gender. 

```{r}
outboundIntersect<- baseline %>% 
  filter(outbound == 1, 
         !is.na(gender)) %>% 
  mutate(race = trimws(race),
         race = gsub("?", "", race, fixed = TRUE),
         gender = trimws(gender),
         race = tolower(race)) %>% 
  group_by(year, gender, race) %>% 
  distinct(name) %>% 
  summarise(count = n())

ggplot(outboundIntersect, aes(x = race, y = count, fill = race)) + geom_bar(stat = "identity") + facet_grid(year ~ gender)
```

Looks like we've started reaching out to lots more white males than we did last year. 