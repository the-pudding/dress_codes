"0","elongateCode <- function(type){"
"0","  if(type == ""clothing"" || type == ""body""){"
"0","    regex <- paste0(""other."", type)"
"0","  } else {"
"0","    regex <- paste0(""\\b"", type, ""\\b.*?\\gender\\b"")"
"0","  }"
"0","  bonusColumn <- colnames(select(banned, matches(regex)))"
"0","  "
"0","  new <- banned %>%"
"0","    # First sort out any additional items that we added to our bonus column"
"0","    separate_rows_(bonusColumn, sep = "","") %>%"
"0","    separate(bonusColumn, into = c(""item"", ""prohibited""), sep = "":"") %>%"
"0","    mutate(type = type) %>% "
"0","    select(c(1:6), c(item, prohibited, type)) %>% "
"0","    filter(!is.na(prohibited)) %>% "
"0","    mutate(prohibited = ifelse(prohibited == ""NA"", ""none"", prohibited))"
"0","  "
"0","  new2 <- banned %>%"
"0","    select(-contains(""any.other"")) %>% "
"0","    gather(key = item, value = prohibited, colnames(select(., contains(!!type)))) %>%"
"0","    filter(!is.na(prohibited)) %>%"
"0","    mutate(item = gsub(""(.*\\.{3})"", """", item),"
"0","         item = gsub(""\\."", "" "", item),"
"0","         item = trimws(item)) %>%"
"0","    mutate(type = type) %>%"
"0","    select(c(1:6), c(item:type))"
"0","  "
"0","  combined <- rbind(new, new2)"
"0","}"
"0","clothingTypes <- c(""accessories"", ""shirt"", ""skirt.dress"", ""pants"", ""shorts"", ""undergarment"", ""footwear"", ""headwear"", ""grooming"", ""body"", ""clothing"")"
"0","longDressCode <- map_dfr(clothingTypes, elongateCode)"
"0","#write.csv(longDressCode, here(""processed_data"", ""clean_dress_code.csv""), row.names = FALSE)"
